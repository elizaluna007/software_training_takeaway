(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/shop"],{1231:function(t,e,i){"use strict";i.r(e);var s=i("6b26"),n=i.n(s);for(var a in s)"default"!==a&&function(t){i.d(e,t,(function(){return s[t]}))}(a);e["default"]=n.a},"161d":function(t,e,i){"use strict";i.r(e);var s=i("8bf3"),n=i("1231");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("eab5");var o,r=i("f0c5"),h=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);e["default"]=h.exports},5973:function(t,e,i){"use strict";(function(t){i("4d8d");s(i("66fd"));var e=s(i("161d"));function s(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("a821")["createPage"])},"6b26":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{name:"",needytime:"",credit:"",logo:"",sale:"",threshold:"",categories:[],active:0,active_id:"",active_tabBar:0,rightHeightList:[],hidden:1,add_icon:"/static/add.png",sub_icon:"/static/sub.png",dish_number:[],shop_Car:[],leave_shop_Car:[],pay_code:"",pay_msg:"",pay_item:[],sumprice:0}},onUnload:function(){this.shop_transform()},onLoad:function(e){var i=this;this.name=e.name,console.log("名字"),console.log(this.name),t.request({url:"https://v3710z5658.oicp.vip/shop/getAllGoodsByName",method:"GET",data:{name:this.name},header:{token:getApp().globalData.token},success:function(t){console.log(t),i.name=t.data.name,i.needytime=t.data.needytime,i.credit=t.data.credit,i.logo=t.data.logo,i.sale=t.data.sale,i.threshold=t.data.threshold,i.categories=t.data.categories;for(var e=0;e<i.categories.length;e++){for(var s=[],n=0;n<i.categories[e].dishes.length;n++)s.push(0);i.dish_number.push(s)}console.log(i.dish_number)}})},onReady:function(){var t=this;setTimeout((function(){t.getHeightList()}),5e3)},methods:{exit_shop_car:function(){this.hidden=1},click_add:function(t,e){var i=e;this.dish_number[t].splice(e,1,this.dish_number[t][i]+1),this.sumprice+=this.categories[t].dishes[e].price,console.log(this.dish_number)},click_sub:function(t,e){var i=e;this.dish_number[t].splice(e,1,this.dish_number[t][i]-1),this.sumprice-=this.categories[t].dishes[e].price,console.log(this.dish_number)},leftClickHandle:function(t){this.active=t,this.active_id="category"+t},getHeightList:function(){var e=this,i=t.createSelectorQuery().in(this);i.selectAll(".right_box").boundingClientRect((function(t){var i=[0],s=0;t.forEach((function(t){s+=t.height,i.push(s)})),e.rightHeightList=i,console.log(e.rightHeightList)})).exec()},rightScroll:function(t){for(var e=t.detail.scrollTop,i=0;i<this.rightHeightList.length;i++){var s=this.rightHeightList[i],n=this.rightHeightList[i+1];e>=s&&e<n&&(this.active=i)}},details:function(){this.hidden=!this.hidden},shop_transform:function(){for(var e=this,i=0;i<this.categories.length;i++)for(var s=0;s<this.categories[i].dishes.length;s++)if(0!=this.dish_number[i][s]){var n={item_name:this.categories[i].dishes[s].name,count:this.dish_number[i][s]};this.leave_shop_Car.push(n),console.log(this.leave_shop_Car)}t.request({url:"https://v3710z5658.oicp.vip/buy/setAllitem",method:"POST",data:{shop_name:this.name,dishes:this.leave_shop_Car},header:{token:getApp().globalData.token},success:function(t){console.log(t),e.pay_code=t.data.code,e.pay_msg=t.data.msg}})},goto_pay:function(){for(var e=this,i=0;i<this.categories.length;i++)for(var s=0;s<this.categories[i].dishes.length;s++)if(0!=this.dish_number[i][s]){var n={name:this.categories[i].dishes[s].name,count:this.dish_number[i][s],price:this.categories[i].dishes[s].price};this.shop_Car.push(n),console.log(this.shop_Car)}t.request({url:"https://v3710z5658.oicp.vip/buy/confirmShoppingCart",method:"POST",data:{name:this.name,dishes:this.shop_Car},header:{token:getApp().globalData.token},success:function(t){console.log(t),e.pay_item=t.data.goods}}),t.navigateTo({url:"/pages/index/pay?name="+this.name+"&shop_Car="+encodeURIComponent(JSON.stringify(this.shop_Car))})},shop_clear:function(){for(var t=0;t<this.dish_number.length;t++)for(var e=0;e<this.dish_number[t].length;e++)this.dish_number[t].splice(e,1,0);this.sumprice=0,console.log(this.dish_number)},active_tabBar_Handle:function(t){this.active_tabBar=0==t?0:1==t?1:2}}};e.default=i}).call(this,i("a821")["default"])},"78c7":function(t,e,i){},"8bf3":function(t,e,i){"use strict";var s;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return s}));var n=function(){var t=this,e=t.$createElement;t._self._c},a=[]},eab5:function(t,e,i){"use strict";var s=i("78c7"),n=i.n(s);n.a}},[["5973","common/runtime","common/vendor"]]]);